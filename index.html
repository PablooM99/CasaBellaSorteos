<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>CasaBella ‚Äî Sorteos</title>
  <meta name="description" content="Bot de sorteos semanales/mensuales de CasaBella. Registrate, eleg√≠ tu n√∫mero (000‚Äì999) y particip√°." />
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
  <link rel="icon" href="assets/logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- NAV -->
  <nav class="nav" role="navigation" aria-label="Principal">
    <div class="wrap container">
      <a href="#inicio" class="brand">
        <img src="assets/logo.png" alt="CasaBella" />
        <span>CasaBella Sorteos</span>
      </a>

      <button id="nav-toggle" aria-label="Abrir men√∫" aria-expanded="false">‚ò∞</button>

      <div class="nav-links">
        <a href="#como-funciona">C√≥mo funciona</a>
        <a href="#participar">Participar</a>
        <a href="#premios">Premios</a>
        <a href="#ganadores">Ganadores</a>
        <a href="#local">Galer√≠a</a>
        <!-- Bot√≥n Login (icono persona) -->
        <button id="btn-open-auth" class="btn ghost" type="button" aria-label="Iniciar sesi√≥n">
          üë§
        </button>
        <!-- Chip de sesi√≥n -->
        <div id="session-chip" class="session-chip hidden" title="Sesi√≥n">
          <span id="chip-name">Usuario</span>
          <span class="badge"><span id="chip-role">USER</span></span>
          <button id="btn-logout" class="btn tiny ghost" type="button">Salir</button>
        </div>
      </div>
    </div>
  </nav>

  <main id="inicio" class="container">
    <!-- HERO opcional -->
    <section class="hero" aria-label="Presentaci√≥n">
      <div class="hero-card">
        <h1 style="margin-top:0">¬°Particip√° del sorteo!</h1>
        <p class="lead">Eleg√≠ un n√∫mero de <b>000</b> a <b>999</b>. Sorteos semanales o mensuales. Entre <b>1</b> y <b>3</b> ganadores.</p>
        <p class="muted">Aseguramos transparencia: n√∫meros √∫nicos, historial de ganadores y premios visibles.</p>
      </div>
      <div class="hero-card">
        <ul class="lead" style="margin:0">
          <li>Inici√° sesi√≥n con Google</li>
          <li>Complet√° tu nombre, tel√©fono y n√∫mero</li>
          <li>Esper√° el sorteo ¬°y mucha suerte! üçÄ</li>
        </ul>
      </div>
    </section>

    <!-- C√ìMO FUNCIONA -->
    <section id="como-funciona" aria-label="C√≥mo funciona">
      <div class="howto-card neon-animated">
        <h2>¬øC√≥mo funciona?</h2>
        <ol style="margin:0 0 8px 18px">
          <li>Inici√° sesi√≥n desde el icono <b>üë§</b> en el men√∫.</li>
          <li>Complet√° el formulario y eleg√≠ un n√∫mero del <b>000</b> al <b>999</b>.</li>
          <li>Solo pod√©s participar <b>una vez por sorteo</b>.</li>
          <li>El admin sortea desde el panel (1 a 3 ganadores) y se publican abajo.</li>
        </ol>
        <p class="small helper">Si tu n√∫mero ya est√° elegido, te avisamos con un mensaje y podr√°s intentar con otro.</p>
      </div>
    </section>

    <!-- FORMULARIO -->
    <section id="participar" aria-label="Formulario de participaci√≥n">
      <div class="form-card neon-animated">
        <h2>Participar</h2>
        <form id="form-participar" autocomplete="on">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label for="nombre">Nombre y apellido</label>
              <input id="nombre" class="input" type="text" placeholder="Tu nombre" required />
            </div>
            <div>
              <label for="telefono">Tel√©fono</label>
              <input id="telefono" class="input" type="tel" placeholder="+54..." required />
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr .5fr;gap:12px;margin-top:12px">
            <div>
              <label for="numero">N√∫mero (000‚Äì999)</label>
              <input id="numero" class="input" type="text" inputmode="numeric" pattern="[0-9]*" value="000" maxlength="3" />
              <p class="helper small">El campo se autocompleta a 3 d√≠gitos (001, 015, 543, etc.).</p>
            </div>
            <div style="display:flex;align-items:end;">
              <button class="btn" type="submit" style="width:100%">Enviar</button>
            </div>
          </div>

          <p id="msg" aria-live="polite"></p>
        </form>
      </div>
    </section>

    <!-- PREMIOS -->
    <section id="premios" aria-label="Premios">
      <h2>Premios</h2>
      <div id="premios-grid"></div>
    </section>

    <!-- GANADORES -->
    <section id="ganadores" aria-label="Ganadores">
      <h2>√öltimos ganadores</h2>
      <ul id="lista-ganadores"></ul>
    </section>

    <!-- GALER√çA -->
    <section id="local" class="gallery" aria-label="Galer√≠a del local">
      <h2>Nuestro local</h2>
      <div class="media-grid">
        <div class="media-item">
          <img
            src="assets/LogoEmpresa.png"
            alt="Frente del local"
            loading="lazy"
            onerror="this.src='assets/logo.png'"
          />
        </div>

        <div class="media-item">
          <img
            src="assets/imagenpredeterminada.jpg"
            alt="Interior del local"
            loading="lazy"
            onerror="this.src='assets/logo.png'"
          />
        </div>

        <div class="media-item">
          <video controls preload="metadata" poster="assets/logo.png">
            <source src="assets/recorrido.mp4" type="video/mp4" />
            Tu navegador no soporta video HTML5.
          </video>
        </div>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="admin" aria-label="Panel de administrador" hidden>
      <h2>Panel admin</h2>
      <div class="admin-grid">
        <!-- SORTEO -->
        <div class="admin-card">
          <h3>Sorteo</h3>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label for="cant-ganadores">Cantidad de ganadores</label>
              <select id="cant-ganadores" class="select">
                <option value="1">1 ganador</option>
                <option value="2">2 ganadores</option>
                <option value="3" selected>3 ganadores</option>
              </select>
            </div>
            <div style="display:flex;align-items:end;">
              <label style="display:flex;gap:8px;align-items:center">
                <input id="avoid-repeat-uid" type="checkbox" checked />
                Evitar dos premios al mismo usuario
              </label>
            </div>
          </div>

          <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
            <button id="btn-sortear" class="btn" type="button">Realizar sorteo</button>
            <button id="btn-reset" class="btn danger" type="button">Resetear sorteo</button>
            <button id="btn-manage-participants" class="btn ghost" type="button">Gestionar participantes</button>
          </div>

          <p id="admin-msg" class="muted" style="margin:10px 0 6px">‚Äî</p>
          <ol id="ganadores-actual" class="lead" style="margin:0;padding-left:20px"></ol>
        </div>

        <!-- PREMIOS (forms) -->
        <div class="admin-card">
          <h3>Administrar premios (m√°x. 5)</h3>
          <div class="premios-forms">
            <!-- data-idx = 1..5 -->
            <div class="premio-form" data-idx="1">
              <label>T√≠tulo</label>
              <input class="input p-titulo" type="text" placeholder="Nombre del premio" />
              <div class="row">
                <div>
                  <label>Imagen (URL)</label>
                  <input class="input p-img" type="url" placeholder="https://..." />
                </div>
                <div>
                  <label>Descripci√≥n</label>
                  <input class="input p-desc" type="text" placeholder="Detalles del premio" />
                </div>
              </div>
              <button class="btn tiny" data-save type="button">Guardar #1</button>
            </div>

            <div class="premio-form" data-idx="2">
              <label>T√≠tulo</label>
              <input class="input p-titulo" type="text" placeholder="Nombre del premio" />
              <div class="row">
                <div>
                  <label>Imagen (URL)</label>
                  <input class="input p-img" type="url" placeholder="https://..." />
                </div>
                <div>
                  <label>Descripci√≥n</label>
                  <input class="input p-desc" type="text" placeholder="Detalles del premio" />
                </div>
              </div>
              <button class="btn tiny" data-save type="button">Guardar #2</button>
            </div>

            <div class="premio-form" data-idx="3">
              <label>T√≠tulo</label>
              <input class="input p-titulo" type="text" placeholder="Nombre del premio" />
              <div class="row">
                <div>
                  <label>Imagen (URL)</label>
                  <input class="input p-img" type="url" placeholder="https://..." />
                </div>
                <div>
                  <label>Descripci√≥n</label>
                  <input class="input p-desc" type="text" placeholder="Detalles del premio" />
                </div>
              </div>
              <button class="btn tiny" data-save type="button">Guardar #3</button>
            </div>

            <div class="premio-form" data-idx="4">
              <label>T√≠tulo</label>
              <input class="input p-titulo" type="text" placeholder="Nombre del premio" />
              <div class="row">
                <div>
                  <label>Imagen (URL)</label>
                  <input class="input p-img" type="url" placeholder="https://..." />
                </div>
                <div>
                  <label>Descripci√≥n</label>
                  <input class="input p-desc" type="text" placeholder="Detalles del premio" />
                </div>
              </div>
              <button class="btn tiny" data-save type="button">Guardar #4</button>
            </div>

            <div class="premio-form" data-idx="5">
              <label>T√≠tulo</label>
              <input class="input p-titulo" type="text" placeholder="Nombre del premio" />
              <div class="row">
                <div>
                  <label>Imagen (URL)</label>
                  <input class="input p-img" type="url" placeholder="https://..." />
                </div>
                <div>
                  <label>Descripci√≥n</label>
                  <input class="input p-desc" type="text" placeholder="Detalles del premio" />
                </div>
              </div>
              <button class="btn tiny" data-save type="button">Guardar #5</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap">
      <div>¬© <span id="year"></span> CasaBella. Todos los derechos reservados.</div>
      <div class="social">
        <a href="#" aria-label="Instagram">Instagram</a>
        <a href="#" aria-label="Facebook">Facebook</a>
        <a href="#" aria-label="TikTok">TikTok</a>
      </div>
    </div>
  </footer>

  <!-- FAB WhatsApp (reemplaz√° data-whatsapp por tu n√∫mero) -->
  <a id="whatsapp-fab" href="#" target="_blank" rel="noopener" data-whatsapp="+54 9 11 1234-5678" aria-label="WhatsApp">‚úÜ</a>

  <!-- MODAL: Autenticaci√≥n -->
  <dialog id="auth-modal" aria-labelledby="auth-title">
    <div class="dialog-body">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <h3 id="auth-title" style="margin:0">Iniciar sesi√≥n</h3>
        <button id="auth-close" class="btn tiny ghost" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <p class="muted">Eleg√≠ un m√©todo para continuar</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button id="login-google" class="btn" type="button">Continuar con Google</button>
        <button id="login-facebook" class="btn ghost" type="button">Continuar con Facebook</button>
      </div>
      <p class="small helper" style="margin-top:12px">Al continuar acept√°s los T√©rminos y la Pol√≠tica de privacidad.</p>
    </div>
  </dialog>

  <!-- MODAL: Participantes (admin) -->
  <dialog id="participants-modal" aria-labelledby="participants-title">
    <div class="dialog-body">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <h3 id="participants-title" style="margin:0">Gestionar participantes</h3>
        <button id="participants-close" class="btn tiny ghost" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <input id="search-participants" class="input" type="search" placeholder="Buscar por nombre o tel√©fono" />
      <div id="participants-list" style="margin-top:12px">‚Äî</div>
    </div>
  </dialog>

  <!-- Fallback backdrop para navegadores sin <dialog> -->
  <div id="dialog-backdrop" hidden></div>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- App -->
  <script type="module" src="main.js"></script>
</body>
</html>
